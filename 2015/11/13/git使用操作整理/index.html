<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>git使用操作整理 | Xiaoyanegr - Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="git基本概念 a. git跟踪并管理的是文件的修改，而非文件
修改就是：新增一行，删除一行，更改某个字符甚至创建新文件等
每次的修改如果不 add 到暂存区，将不会被 commit 提交到仓库的
 b. 工作区(Working Directory)：就是当前你的版本库(.git文件夹)所在目录 c. 版本库(Repository)：工作区有个隐藏的”.git”目录，这个目录不算工作区，而是Git">
<meta property="og:type" content="article">
<meta property="og:title" content="git使用操作整理">
<meta property="og:url" content="http://yoursite.com/2015/11/13/git使用操作整理/index.html">
<meta property="og:site_name" content="Xiaoyanegr - Hexo">
<meta property="og:description" content="git基本概念 a. git跟踪并管理的是文件的修改，而非文件
修改就是：新增一行，删除一行，更改某个字符甚至创建新文件等
每次的修改如果不 add 到暂存区，将不会被 commit 提交到仓库的
 b. 工作区(Working Directory)：就是当前你的版本库(.git文件夹)所在目录 c. 版本库(Repository)：工作区有个隐藏的”.git”目录，这个目录不算工作区，而是Git">
<meta property="og:updated_time" content="2015-12-09T09:35:29.240Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="git使用操作整理">
<meta name="twitter:description" content="git基本概念 a. git跟踪并管理的是文件的修改，而非文件
修改就是：新增一行，删除一行，更改某个字符甚至创建新文件等
每次的修改如果不 add 到暂存区，将不会被 commit 提交到仓库的
 b. 工作区(Working Directory)：就是当前你的版本库(.git文件夹)所在目录 c. 版本库(Repository)：工作区有个隐藏的”.git”目录，这个目录不算工作区，而是Git">
  
    <link rel="alternative" href="/atom.xml" title="Xiaoyanegr - Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Xiaoyanegr - Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="[layout]-git使用操作整理" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/13/git使用操作整理/" class="article-date">
  <time datetime="2015-11-12T16:00:00.000Z" itemprop="datePublished">2015-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      git使用操作整理
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>git基本概念<br> a. git跟踪并管理的是文件的修改，而非文件</p>
<pre><code>修改就是：新增一行，删除一行，更改某个字符甚至创建新文件等
每次的修改如果不 <span class="keyword">add </span>到暂存区，将不会被 commit 提交到仓库的
</code></pre><p> b. 工作区(Working Directory)：就是当前你的版本库(.git文件夹)所在目录<br> c. 版本库(Repository)：工作区有个隐藏的”.git”目录，这个目录不算工作区，而是Git的版本库<br> d. 版本库：</p>
<pre><code>暂存区：称为stage或index
        git add file 即为将文件的修改添加到暂存区
分支：称为branch，git为我们创建第一个分支是<span class="keyword">master</span>
      <span class="title">git</span> commit 即为将文件提交到当前HEAD指向的分支
HEAD: 指向当前分支版本的指针
</code></pre><p> e. 自己本地创建的分支，别人是看不见的<br> f. 通常情况下合并分支，Git会用”Fast forward”模式，这种模式下被合并的删除分支后，会丢掉分支信息</p>
<pre><code>如果，强制禁止<span class="string">"Fast forward"</span>模式，Git就会在<span class="keyword">merge</span>时生成一个新的commit,这样，从分支历史上就可以看出分支信息。
强制禁止<span class="string">"Fast forward"</span>:
     git <span class="keyword">merge</span> --<span class="keyword">no</span>-ff -<span class="keyword">m</span> '<span class="keyword">merge</span> info' branch_name
</code></pre><p> g. git config –global core.autocrlf false    // 禁止GIT自动换行</p>
<pre><code>git config --<span class="keyword">global</span> core.safecrlf <span class="keyword">true</span>     <span class="comment">// 提交时强制检测换行符</span>
</code></pre></li>
<li><p>安装完成后的基本设置<br> git config –global user.name “Your Name”    设置全局的用户名<br> git config –global user.email “email@example.com”   设置全局的Email<br> git config –global color.ui true   让bash显示颜色<br> git config –global core.autocrlf true 提交时将CRLF转换为LF,迁出代码将LF转换为CRLF</p>
</li>
<li>初始化版本库(仓库)<br> git init</li>
<li>将文件的修改添加到版本库的暂存区(stage/index)<br> git add file_name.ext</li>
<li>提交暂存区(stage/index)的所有修改内容到仓库(当前分支)<br> git commit -m “本次提交简介,最好是文件或功能的简介,因为会显示在github文件描述栏里”</li>
<li>查看版本库的当前状态<br> git status</li>
<li>diff 查看文件<br> git diff file_name.ext</li>
<li>查看日志(历史记录)<br> git log<br> git log –pretty=online : 单行显示</li>
<li>查看每一次提交或改变版本库的命令(查看历史提交版本)<br> git reflog</li>
<li>Git版本号的表示<br> git用SHA1算法计算出来的非常大的数字,用16进制表示<br> git用HEAD表示当前最新提交的版本<br> git的上一个版本就是HEAD^,上上一个版本就是HEAD^^,依次类推<pre><code>也可这样表示往上<span class="number">100</span>个版本: HEAD~<span class="number">100</span>
</code></pre></li>
<li>版本回退(可以理解为重新设置HEAD指针的指向)<br>git reset –hard HEAD^<br>git reset –hard commit_id(版本号)</li>
<li>丢弃工作区(所有文件或某文件)的修改<pre><code>分两种情况：
    <span class="tag">a</span>. 修改未被提交到暂存区(stage/index)，撤销修改将回到和当前branch版本库一模一样的状态
    <span class="tag">b</span>. 修改已经提交到暂存区(stage/index)后，又进行了部分修改(此修改未提交暂存区)，
       撤销修改将回到添加暂存区后的状态
    总之，就是让这个文件回到最近一次git commit 或 git add 后的状态，即，只是丢弃工作区的修改。其实就是用版本库或暂存区里的文件替换工作区的文件
</code></pre>git checkout – file_name.ext</li>
<li>撤销已经提交暂存区的更改，重新放回工作区。<br>其实就是将暂存区的文件用当前branch所在的版本库替换<br>用HEAD表示当前branch的最新版本<br>git reset HEAD file_name.ext</li>
<li>删除文件(一般分三步)<br> step 1：在资源管理器下直接删除文件，或 rm file<br> step 2：git rm file<br> step 3：git commit -m ‘delete info’</li>
<li>创建分支<br>a. git checkout -b branch_name        创建并切换到新建的分支<br>b. git branch branch_name             创建新分支，并未切换<br>注：<pre><code><span class="label">git</span> checkout -<span class="keyword">b </span><span class="keyword">branch_name </span>相当于 git <span class="keyword">branch </span><span class="keyword">branch_name </span>和 git checkout <span class="keyword">branch_name两条命令</span>
</code></pre></li>
<li>查看分支<br>git branch<br>git branch -a : -a参数将会同时列出远端和本地分支<br>注：当前分支前面会标一个星号(*)</li>
<li>切换分支<br>git checkout branch_name    切换到branch_name分支</li>
<li>合并分支<br>git marge branch_name   将branch_name分支合并到当前分支<br>注：合并模式分两种<pre><code><span class="tag">a</span>. 快进模式：直接将当前分支的指针指向branch_name分支的当前提交
<span class="tag">b</span> TODO.....
</code></pre></li>
<li>删除分支<pre><code><span class="label">a.</span> 被删除分支已经被合并
    git <span class="keyword">branch </span>-d <span class="keyword">branch_name
</span><span class="keyword">b. </span>被删除分支未被合并(强行删除)
    git <span class="keyword">branch </span>-D <span class="keyword">branch-name
</span>    注：未合并分支删除后将丢失修改
</code></pre></li>
<li>解决冲突<br>a. 当合并分支时，会发生冲突，这样合并分支就不会是“快进模式”合并了<br>b. Git用 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD, =======, &gt;&gt;&gt;&gt;&gt;&gt;&gt; branch_name 来标记出不同分支的内容<br>c. 然后手工编辑冲突<br>注：当Git无法自动合并分支时，就必须首先解决冲突，然后再提交，合并才能完成。</li>
<li>查看分支合并情况<br>git log –graph –pretty=oneline –abbrev-commit<pre><code>注： <span class="comment">--graph 伪图形化查看分支合并图</span>
     <span class="comment">--pretty=oneline 单行省略显示(将不显示提交者和提交时间信息)</span>
     <span class="comment">--abbrev-commit  缩略显示版本ID</span>
</code></pre></li>
<li>保存当前工作现场(即,保存储藏)<br>当有其它分支需要马上开发(比如bug修复分支)，而当前的分支工作并未完成，不能提交时，可以使用保存工作现场，等以后恢复现场后再继续工作<br>修复bug时，我们会通过创建新的bug分支进行修复，然后合并，最后删除<br>当手头工作没有完成时，先把工作现场git stash一下，然后去修复bug，修复后，再git stash pop，回到工作现场<br>保存现场：git stash<br>查看现场：git stash list<br>恢复现场：a. git stash apply<pre><code>   此方法恢复现场后stash的内容并不会被删除，需要 git stash drop 手工删除
<span class="keyword">b. </span>git stash <span class="keyword">pop
</span>   恢复现场的同时删除stash内容
</code></pre>删除现场：git stash drop<br>注：可多次stash，恢复的时候，先用 git stash list 查看，然后指定恢复的stash，用命令：<pre><code>git stash apply stash<span class="variable">@{0}</span>
git stash <span class="keyword">pop</span> stash<span class="variable">@{0}</span>
</code></pre></li>
<li>本地仓库关联远程仓库<br> git remote add origin git@github.com:wangnanphp/learngit.git<br> 注：origin为远程库的名称，也可以叫别的名子，但origin更见名知意</li>
<li>推送本地仓库指定分支到远程仓库<br> git push<br> git push &lt;远端仓库&gt; &lt;本地仓库的分支&gt;<br> git push -u orgin master<br> 注：git push 直接将当前分支推送到远程<pre><code>-u <span class="tag">&lt;远端&gt;</span> <span class="tag">&lt;分支&gt;</span>   (一般用于第一次推送,以后推送可以简化命令)
   推送本地<span class="literal">master</span>分支的同时还将本地<span class="literal">master</span>和远程<span class="literal">master</span>关联
</code></pre></li>
<li>从远程库克隆<br>git clone git@github.com:wangnanphp/learngit.git<br>注：默认克隆远程库的情况下，只能看到克隆到的本地master分支<pre><code>如果要克隆其他分支，请看<span class="number">27</span>条(分支抓取)
</code></pre></li>
<li>查看远程库信息<br>git remote<br>git remote -v 显示详细信息<br>注：详细信息中显示的 “fetch” 代表可以拉取(抓取)的地址，”push” 代表可以推送的地址<pre><code>如果没有推送权限，将看不到 <span class="string">"push"</span> 的地址
</code></pre></li>
<li>推送本地分支<br>将指定分支上的所有本地提交(commit)，推送到远程库<br>git push origin_depository branch_name<pre><code><span class="label">orgin_depository</span>：远程库
<span class="keyword">branch_name：本地分支
</span><span class="label">eg</span>：git <span class="keyword">push </span>origin master
</code></pre></li>
<li>获取(抓取)远程分支修改<br>git pull<br>注：必须指定当前分支与远程分支的链接关系，否则 git pull 会失败<pre><code>git pull 回来的远端修改在没有冲突的情况下会自动合并到本地分支
如果远端的内容和本地的内容有冲突，则需要手工解决冲突，再commit，再<span class="keyword">push</span>
</code></pre></li>
<li>创建远程分支到本地(分支抓取)<br>抓取远程分支到本地，并切换到<br>git checkout -b local_branch origin_depository/origin_branch<pre><code>eg：git checkout -b <span class="built_in">dev</span> origin/<span class="built_in">dev</span>
</code></pre>注：此操作只会在本地创建和远程分支对应的分支，</li>
<li>设置本地分支与远程分支之间的链接关系(注：此参数已经弃用，有两个替代参数)<br>git branch –set-upstream local_branch origin_depository/branch_name<pre><code>eg：git branch --<span class="built_in">set</span>-upstream <span class="built_in">dev</span> origin/<span class="built_in">dev</span>
</code></pre>// 一个替代的：<br>git branch –set-upstream-to origin_depository/branch_name<br>关联本地当前分支到远端 origin_depository/branch_name 分支</li>
<li>创建标签<br>git tag tag_name<pre><code>eg: git <span class="keyword">tag</span> <span class="title">v0</span>.<span class="number">1</span>
</code></pre>git tag tag_name commit_id  用指定 commit_id 创建tag<br>git tag -a tag_name -m “tag info”   创建带说明信息的tag  -a：tag_name  -m “tag_info”<br>git tag -s tag_name -m “tag info” commit_id    -s 用私钥签名一个标签<br>注：默认标签是打在当前分支的最新commit上(HEAD)，也可以给指定commit_id打标签<pre><code>发布一个版本时，我们通常先在版本库中打一个标签，这样，就唯一确定了打标签时刻的版本。
<span class="operator">-s</span> 签名采用PGP签名，因此，必须首先安装gpg（GnuPG），如果没有找到gpg，或者没有gpg密钥对，就会报错
</code></pre></li>
<li>查看所有标签<br>git tag<br>注：标签不是按时间顺序，而是按字母顺序排列的</li>
<li>查看标签信息<br>git show tag_name</li>
<li>删除标签<br>git tag -d tag_name<br>注：因为创建的标签都只存储在本地，不会自动推送到远程。所以，打错的标签可以在本地安全删除</li>
<li>推送本地标签<br>git push origin tag_name    推送单个标签<br>git push origin –tags      一次性推送全部尚未推送远程的本地标签</li>
<li>推送过远程的标签删除<br>a. 先删除本地<pre><code>git <span class="keyword">tag</span> <span class="title">-d</span> tag_name
</code></pre>b. 再删除远程<pre><code>git <span class="keyword">push</span> origin : refs<span class="regexp">/tags/</span>tag_name
</code></pre></li>
<li>别名配置<br>git config –global alias.st status</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/13/git使用操作整理/" data-id="cij6wm6pj00184wjpbal9i3le" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/11/14/用队列的方式解决目录遍历问题/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          用队列的方式解决目录遍历问题
        
      </div>
    </a>
  
  
    <a href="/2015/11/12/在Linux中将php-fpm配置成服务的方法/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">在Linux中将php-fpm配置成服务的方法</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/composer/">composer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/laravel/">laravel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/">layout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lgit/">lgit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pdo/">pdo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php7/">php7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/抓包/">抓包</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语言/">语言</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/composer/" style="font-size: 10px;">composer</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hexo/" style="font-size: 12.5px;">hexo</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/laravel/" style="font-size: 10px;">laravel</a> <a href="/tags/layout/" style="font-size: 10px;">layout</a> <a href="/tags/lgit/" style="font-size: 10px;">lgit</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/nginx/" style="font-size: 12.5px;">nginx</a> <a href="/tags/pdo/" style="font-size: 10px;">pdo</a> <a href="/tags/php/" style="font-size: 17.5px;">php</a> <a href="/tags/php7/" style="font-size: 10px;">php7</a> <a href="/tags/抓包/" style="font-size: 10px;">抓包</a> <a href="/tags/框架/" style="font-size: 10px;">框架</a> <a href="/tags/语言/" style="font-size: 10px;">语言</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/01/09/PHP7的PHP-Redis扩展/">PHP7的PHP-Redis扩展</a>
          </li>
        
          <li>
            <a href="/2016/01/08/https站点的搭建/">Https站点搭建</a>
          </li>
        
          <li>
            <a href="/2016/01/07/linux下php开启pdo扩展模块步骤/">linux下php开启pdo扩展模块步骤</a>
          </li>
        
          <li>
            <a href="/2015/12/11/修改php.ini报错级别/">mysql权限分配</a>
          </li>
        
          <li>
            <a href="/2015/11/14/用队列的方式解决目录遍历问题/">用队列的方式解决目录遍历问题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 xiaoyanegr<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>